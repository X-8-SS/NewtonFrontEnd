<h2 class="p-3 text-left">Video Games Edit</h2>

<div class="register-form">
  <form [formGroup]="videoGameForm" (ngSubmit)="onSubmit()">
    <div class="form-group">
      <div class="col-xs-12 col-12 col-md-4 form-group">
        <label>Title</label>
      <input
        type="text"
        formControlName="title"
        class="form-control"
        maxlength="30"
        placeholder="Title of video game"
        [ngClass]="{ 'is-invalid': submitted && f.title.errors }" />
      <div *ngIf="submitted && f.title.errors" class="invalid-feedback">
        <div *ngIf="f.title.errors.required">Title is required</div>
      </div>
    </div>
    </div>

    <div class="form-group">
      <div class="col-xs-12 col-12 col-md-4 form-group">
        <label>Price</label>
        <input
        type="text"
        formControlName="price"
        maxlength="6"
        class="form-control"
        placeholder="Price"
        (blur)="formatAmount($any($event.target).value)"
        [ngClass]="{ 'is-invalid': submitted && f.price.errors }" />

      <div *ngIf="submitted && f.price.errors" class="invalid-feedback">
        <div *ngIf="f.price.errors.required">Price is required</div>
      </div>
      </div>
    </div>

    <div class="form-group">
      <div class="col-xs-12 col-12 col-md-4 form-group">
        <label>Release Date</label>
        <input type="text"
              placeholder="Release date"
              class="form-control"
              formControlName="releaseDate"
              bsDatepicker
              [minDate]="minDate"
              [maxDate]="maxDate">
          <pre *ngIf="!f.releaseDate.errors" class="code-preview">{{ f.releaseDate.value | date }}</pre>
      </div>
    </div>

    <div class="form-group">
      <div class="col-xs-12 col-12 col-md-4 form-group">
        <label>Genre</label>
        <select
            id="chooseGenre"
            class="form-control"
            formControlName="genreId"
            (change)="onGenreChange($any($event.target).value)">
            <option value="0">Choose...</option>
            <option
                *ngFor="let g of videGameGenre"
                [value]="g.genreId"
                [selected]="selectedGenreId === g.genreId">
                {{ g.name }}
            </option>
        </select>
        <div *ngIf="submitted && f.genreId.errors" class="invalid-feedback">
          <div *ngIf="f.genreId.errors.idIsZero">Genre is required</div>
        </div>
      </div>
    </div>

    <div class="form-group">
      <div class="col-xs-12 col-12 col-md-4 form-group">
        <label>Rating</label>
        <select
            id="chooseRating"
            class="form-control"
            formControlName="ratingId"
            (change)="onRatingChange($any($event.target).value)">
            <option value="0">Choose...</option>
            <option
                *ngFor="let r of videoGameRating"
                [value]="r.ratingId"
                [selected]="selectedRatingId === r.ratingId">
                {{ r.category }}
            </option>
        </select>
      </div>
    </div>

    <div class="form-group">
      <div class="col-xs-12 col-12 col-md-4 form-group">
        <button type="button" (click)="onCancel()" class="btn btn-warning">Back</button>
        <button type="submit" class="btn btn-primary float-right" [disabled]="!isValid()">Save</button>
    </div>
    </div>
  </form>
</div>
